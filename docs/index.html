<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Twitter Conversation Networks and Analysis • voson.tcn</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Twitter Conversation Networks and Analysis">
<meta property="og:description" content="Collects tweets and metadata for threaded conversations and
    generates networks.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">voson.tcn</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="news/index.html">
    <span class="fa fa-newspaper"></span>
     
    Changelog
  </a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-cubes fa-lg"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://vosonlab.github.io/posts/2021-03-23-twitter-conversation-networks/" class="external-link">
        <span class="far fa-file-alt"></span>
         
        Getting started with the voson.tcn package
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://vosonlab.net/" class="external-link">
    <span class="fa fa-flask fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/vosonlab" class="external-link">
    <span class="fab fa-twitter-square fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/vosonlab/voson.tcn" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="vosontcn---twitter-conversation-networks">voson.tcn - Twitter Conversation Networks<img src="https://vosonlab.github.io/voson.tcn/images/logo.png" width="140px" align="right"><a class="anchor" aria-label="anchor" href="#vosontcn---twitter-conversation-networks"></a>
</h1></div>

<p>Twitter Conversation Networks and Analysis. This package uses the Twitter API v2 endpoints to collect tweets and generate networks for threaded conversations identified using the new tweet <a href="https://developer.twitter.com/en/docs/twitter-api/conversation-id" class="external-link">conversation identifier</a>.</p>
<p>An introduction to the Twitter API v2 can be found <a href="https://developer.twitter.com/en/docs/twitter-api/getting-started/about-twitter-api" class="external-link">here</a>, and the Twitter Developer Application process <a href="https://developer.twitter.com/en/docs/twitter-api/getting-started/getting-access-to-the-twitter-api" class="external-link">here</a>.</p>
<div class="section level2">
<h2 id="installation-options">Installation Options<a class="anchor" aria-label="anchor" href="#installation-options"></a>
</h2>
<p>Install the most recent CRAN release:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"voson.tcn"</span><span class="op">)</span></span></code></pre></div>
<p>Install the most recent release tag via GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://github.com/vosonlab/voson.tcn/releases/download/v0.5.0/voson.tcn-0.5.0.tar.gz"</span>,</span>
<span>  repo <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span></code></pre></div>
<p>Install the latest development version:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># library(remotes)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"vosonlab/voson.tcn"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="oauth-authentication">OAuth Authentication<a class="anchor" aria-label="anchor" href="#oauth-authentication"></a>
</h3>
<p>This package currently uses app based authentication approach with an <code>OAuth2</code> bearer token rather than a user based one that uses an <code>OAuth1a</code> token. Bearer tokens have read-only API access and higher rate-limits, whereas user tokens have lower rate-limits and broader permissions that are not required for searching and collecting tweets.</p>
<p>To retrieve a bearer token, both the <code>consumer key</code> and <code>consumer secret</code> for a Developer <code>Standard Project</code> or <code>Academic Research Project</code> app (that has been approved to use the Twitter API v2 endpoints) are required. These can be found or created on the Twitter Developer Portals <a href="https://developer.twitter.com/en/portal/projects-and-apps" class="external-link">Projects &amp; Apps</a> page. If you already have your bearer token you can also assign it directly to a <code>voson.tcn</code> token object using the <code>bearer</code> string parameter.</p>
</div>
<div class="section level3">
<h3 id="search-endpoint">Search Endpoint<a class="anchor" aria-label="anchor" href="#search-endpoint"></a>
</h3>
<p>By default the <code>recent</code> search endpoint is used that makes available for collection only tweets that were made within the last ~7 days. If the user has an <code>Academic Research Project</code> they can also use the <code>tcn_threads</code> parameter <code>endpoint = "all"</code> to collect on <code>full-archive</code> conversation tweets.</p>
<p>If collecting on historical tweets a <code>start_time = "2021-03-18T00:00:00Z"</code> datetime parameter will need to be specified if the conversation is older than 30 days old (the default API search start time). The datetime is in UTC and ISO 8601 format passed as a string.</p>
</div>
<div class="section level3">
<h3 id="rate-limits">Rate-limits<a class="anchor" aria-label="anchor" href="#rate-limits"></a>
</h3>
<p>The API <code>recent search</code> endpoint where the conversation tweets are retrieved from has a rate-limit of 450 requests per 15 min (per app). A single request can retrieve 100 tweets, translating to an upper limit of 45,000 tweets per 15 mins.</p>
<p>The <code>full-archive search</code> allows 300 requests of 500 tweets, translating to 150,000 tweets per 15 mins. There is also a limit of only 1 request per second for the <code>full-archive search</code> endpoint.</p>
<p>The <code>tweet lookup</code> endpoint used by <code>tcn_tweets</code> has a rate-limit of 300 requests of 100 tweets (30,000) per 15 minutes.</p>
<p>The <code>tcn_threads</code> function has a parameter <code>retry_on_limit</code> that when set to <code>TRUE</code> will wait until the API reset time before continuing when a rate-limit has been reached.</p>
</div>
<div class="section level3">
<h3 id="tweet-caps">Tweet Caps<a class="anchor" aria-label="anchor" href="#tweet-caps"></a>
</h3>
<p>There is currently a cap of 500 thousand tweets that be collected per month per project under the Twitter API v2 <code>Standard</code> product track, and 10 million for the <code>Academic Research</code> track. These caps only apply to certain API endpoints, such as <code>recent</code> and <code>full-archive search</code>. The <code>voson.tcn</code> <code>tcn_threads</code> function uses the search endpoints and therefore contributes towards this cap, however the <code>tcn_tweets</code> and <code>tcn_counts</code> functions do not.</p>
<p>Project caps are only able to be checked from the <a href="https://developer.twitter.com/en/portal/dashboard" class="external-link">Twitter Developer Console Dashboard</a>.</p>
</div>
<div class="section level3">
<h3 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h3>
<ul>
<li>Does not yet support OAuth1a authentication as there is no current use case.</li>
<li>Does not currently collect additional user metadata for authors of tweets that were quoted and are external to the conversation. This can result in incomplete actor node metadata for some quoted tweets: <code>user_A --replies--&gt; user_B --quotes--&gt; (external user_NA)</code>
</li>
<li>Handles but does not report on broken reply chains caused by deleted tweets or suspended users. These can result in a disconnected graph with additional components.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="get-access-token">Get Access Token<a class="anchor" aria-label="anchor" href="#get-access-token"></a>
</h3>
<p>Retrieve and save an app bearer token using its consumer keys.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vosonlab/voson.tcn" class="external-link">voson.tcn</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_token.html">tcn_token</a></span><span class="op">(</span>consumer_key <span class="op">=</span> <span class="st">"xxxxxxxx"</span>,</span>
<span>                   consumer_secret <span class="op">=</span> <span class="st">"xxxxxxxx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># alternatively a bearer token string can be assigned directly</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_token.html">tcn_token</a></span><span class="op">(</span>bearer <span class="op">=</span> <span class="st">"xxxxxxxx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># if you save the token to file this step only needs to be done once</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">token</span>, <span class="st">"~/.tcn_token"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="collect-conversation-tweets">Collect Conversation Tweets<a class="anchor" aria-label="anchor" href="#collect-conversation-tweets"></a>
</h3>
<p>Using tweet urls collect conversation tweets and metadata to generate networks.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read token from file</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"~/.tcn_token"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># choose a twitter conversation thread or multiple threads to collect</span></span>
<span><span class="co"># e.g https://twitter.com/Warcraft/status/1372615159311699970, and</span></span>
<span><span class="co">#     https://twitter.com/Warcraft/status/1372487989385965569</span></span>
<span></span>
<span><span class="co"># can use any tweet or tweet id that is part of the conversation thread</span></span>
<span><span class="co"># input is a list of tweet ids, tweet urls or combination of both</span></span>
<span><span class="va">tweet_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://twitter.com/Warcraft/status/1372615159311699970"</span>,</span>
<span>               <span class="st">"1372487989385965569"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># collect the conversation thread tweets for supplied ids           </span></span>
<span><span class="va">thread_tweets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_threads.html">tcn_threads</a></span><span class="op">(</span><span class="va">tweet_ids</span>, <span class="va">token</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># academic track historical endpoint - specify start_time and optionally end_time</span></span>
<span><span class="va">thread_tweets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_threads.html">tcn_threads</a></span><span class="op">(</span><span class="va">tweet_ids</span>, token <span class="op">=</span> <span class="va">token</span>,</span>
<span>                             endpoint <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                             start_time <span class="op">=</span> <span class="st">"2021-03-17T00:00:00Z"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>tcn_threads</code> function produces a named list comprising a dataframe with tweets and metadata and a dataframe of users metadata.</p>
<p><em>Note: If using the standard product track only recent search API requests can be performed. No tweets older than ~7 days will be collected in the conversation search. The tweets and any directly referenced tweets for the tweet id’s provided will still be collected however.</em></p>
<p><em>Note: When specifying start and end times note that the API returns tweet created dates in <code>2021-03-17T00:00:00.000Z</code> format, however API requests require the shorter <code>2021-03-17T00:00:00Z</code> format.</em></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">thread_tweets</span><span class="op">)</span></span>
<span><span class="co"># [1] "tweets" "users" "errors" "meta"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">thread_tweets</span><span class="op">$</span><span class="va">tweets</span><span class="op">)</span></span>
<span><span class="co"># [1] 147</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">thread_tweets</span><span class="op">$</span><span class="va">users</span><span class="op">)</span></span>
<span><span class="co"># [1] 118</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">errors</span><span class="op">)</span></span>
<span><span class="co"># [1] 0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">thread_tweets</span><span class="op">$</span><span class="va">meta</span><span class="op">)</span></span>
<span><span class="co"># [1] 2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="collect-conversation-tweet-counts">Collect Conversation Tweet Counts<a class="anchor" aria-label="anchor" href="#collect-conversation-tweet-counts"></a>
</h3>
<p>This function can be used to retrieve the tweet activity in terms of tweet count for conversation id’s. It will return the volume of tweets for conversations over time, optionally by specified granularity (day, hour or minute). This can be useful for determining how many tweets will be returned before collecting tweets for a conversation or getting an overview of conversation tweet activity.</p>
<p>The default time granularity is tweet counts per hour for the last ~7 days using the <code>recent</code> counts API endpoint. Researchers on the <code>Academic</code> track can specify an endpoint of <code>all</code> and access <code>full-archive</code> tweet counts.</p>
<p>Tweet counts do not contribute towards your Twitter projects monthly tweet cap.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get tweet count for conversation thread over approximately 3 days</span></span>
<span><span class="co"># start time set approximately when conversation started</span></span>
<span><span class="va">thread_counts</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/tcn_counts.html">tcn_counts</a></span><span class="op">(</span></span>
<span>    ids <span class="op">=</span> <span class="st">"1491430617111674882"</span>,</span>
<span>    token <span class="op">=</span> <span class="va">token</span>,</span>
<span>    endpoint <span class="op">=</span> <span class="st">"recent"</span>,</span>
<span>    start_time <span class="op">=</span> <span class="st">"2022-02-09T15:00:00Z"</span>,</span>
<span>    end_time <span class="op">=</span> <span class="st">"2022-02-12T10:00:00Z"</span>,</span>
<span>    granularity <span class="op">=</span> <span class="st">"day"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">thread_counts</span><span class="op">)</span></span>
<span><span class="co"># [1] "data"   "errors" "meta"   "counts"</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">thread_counts</span><span class="op">$</span><span class="va">counts</span><span class="op">)</span></span>
<span><span class="co"># # A tibble: 4 x 6</span></span>
<span><span class="co">#   end                      start     tweet_count timestamp conversation_id page</span></span>
<span><span class="co">#   &lt;chr&gt;                    &lt;chr&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           &lt;lgl&gt;</span></span>
<span><span class="co"># 1 2022-02-10T00:00:00.000Z 2022-02-~           3    1.64e9 14914306171116~ NA</span></span>
<span><span class="co"># 2 2022-02-11T00:00:00.000Z 2022-02-~          87    1.64e9 14914306171116~ NA</span></span>
<span><span class="co"># 3 2022-02-12T00:00:00.000Z 2022-02-~          29    1.64e9 14914306171116~ NA</span></span>
<span><span class="co"># 4 2022-02-12T10:00:00.000Z 2022-02-~           0    1.64e9 14914306171116~ NA</span></span>
<span></span>
<span><span class="co"># get total tweets per conversation id for specified period</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">thread_counts</span><span class="op">$</span><span class="va">counts</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">conversation_id</span>, wt <span class="op">=</span> <span class="va">tweet_count</span><span class="op">)</span></span>
<span><span class="co"># # A tibble: 1 x 2</span></span>
<span><span class="co">#   conversation_id         n</span></span>
<span><span class="co">#   &lt;chr&gt;               &lt;int&gt;</span></span>
<span><span class="co"># 1 1491430617111674882   119</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="collect-specific-tweets">Collect Specific Tweets<a class="anchor" aria-label="anchor" href="#collect-specific-tweets"></a>
</h3>
<p>Using tweet urls or id’s it’s also possible collect specific tweets and their metadata.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># choose tweets to collect</span></span>
<span><span class="co"># e.g https://twitter.com/Warcraft/status/1372615159311699970, and</span></span>
<span><span class="co">#     https://twitter.com/Warcraft/status/1372487989385965569</span></span>
<span></span>
<span><span class="va">tweet_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://twitter.com/Warcraft/status/1372615159311699970"</span>,</span>
<span>               <span class="st">"1372487989385965569"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># collect the tweets for supplied ids           </span></span>
<span><span class="va">tweets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_tweets.html">tcn_tweets</a></span><span class="op">(</span><span class="va">tweet_ids</span>, <span class="va">token</span>, referenced_tweets <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">)</span></span>
<span><span class="co"># [1] "tweets" "users" "errors"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">tweets</span><span class="op">)</span></span>
<span><span class="co"># [1] 2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">users</span><span class="op">)</span></span>
<span><span class="co"># [1] 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tweets</span><span class="op">$</span><span class="va">errors</span><span class="op">)</span></span>
<span><span class="co"># [1] 0</span></span></code></pre></div>
<p>Tweets from any time can be collected using any product track access token and do not contribute to your Twitter projects monthly tweet cap.</p>
</div>
<div class="section level3">
<h3 id="generate-networks">Generate Networks<a class="anchor" aria-label="anchor" href="#generate-networks"></a>
</h3>
<p>Two types of networks can be generated from the tweets collected. An <code>activity</code> network in which tweets are the nodes and an <code>actor</code> network where Twitter users are the nodes. Edges are the relationships between nodes, in both networks these are either a <code>reply</code> or a <code>quote</code>, signifying for example that a tweet is a reply-to another tweet or that a user has replied to another user.</p>
<div class="section level4">
<h4 id="create-an-activity-network">Create an activity network<a class="anchor" aria-label="anchor" href="#create-an-activity-network"></a>
</h4>
<p>The activity network has tweet metadata such as tweet metrics and author usernames as node attributes.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">activity_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_network.html">tcn_network</a></span><span class="op">(</span><span class="va">thread_tweets</span>, <span class="st">"activity"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># activity nodes dataframe structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">activity_net</span><span class="op">$</span><span class="va">nodes</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># # A tibble: 148 x 11</span></span>
<span><span class="co">#   tweet_id  user_id  source created_at text    public_metrics.~ public_metrics.~</span></span>
<span><span class="co">#   &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;              &lt;int&gt;            &lt;int&gt;</span></span>
<span><span class="co"># 1 13726476~ 9427940~ Twitt~ 2021-03-1~ @Warcr~                0                0</span></span>
<span><span class="co"># 2 13726461~ 1609030~ Twitt~ 2021-03-1~ @Patri~                0                0</span></span>
<span><span class="co"># 3 13726452~ 1190870~ Twitt~ 2021-03-1~ @Warcr~                0                0</span></span>
<span><span class="co"># # ... with 145 more rows, and 4 more variables:</span></span>
<span><span class="co"># #   public_metrics.like_count &lt;int&gt;, public_metrics.quote_count &lt;int&gt;,</span></span>
<span><span class="co"># #   profile.name &lt;chr&gt;, profile.username &lt;chr&gt;</span></span>
<span></span>
<span><span class="co"># activity edges dataframe structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">activity_net</span><span class="op">$</span><span class="va">edges</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># # A tibble: 122 x 3</span></span>
<span><span class="co">#   from                to                  type      </span></span>
<span><span class="co">#   &lt;chr&gt;               &lt;chr&gt;               &lt;chr&gt;     </span></span>
<span><span class="co"># 1 1372636834971455494 1372630068162297860 replied_to</span></span>
<span><span class="co"># 2 1372635200748937223 1372615159311699970 replied_to</span></span>
<span><span class="co"># 3 1372634777275265029 1372615159311699970 replied_to</span></span>
<span><span class="co"># # ... with 119 more rows</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-an-actor-network">Create an actor network<a class="anchor" aria-label="anchor" href="#create-an-actor-network"></a>
</h4>
<p>The actor network has additional user profile metadata as node attributes.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">actor_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tcn_network.html">tcn_network</a></span><span class="op">(</span><span class="va">thread_tweets</span>, <span class="st">"actor"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># actor nodes dataframe structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">actor_net</span><span class="op">$</span><span class="va">nodes</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># # A tibble: 105 x 13</span></span>
<span><span class="co">#   user_id source profile.name profile.profile~ profile.location profile.username</span></span>
<span><span class="co">#   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           </span></span>
<span><span class="co"># 1 275993~ Twitt~ "\U0001d43f~ https://pbs.twi~ England          Stab~       </span></span>
<span><span class="co"># 2 133101~ Twitt~ "Andr ~      https://pbs.twi~ NA               virg~ </span></span>
<span><span class="co"># 3 240160~ Twitt~ "Sebast ~    https://pbs.twi~ NA               Nord~     </span></span>
<span><span class="co"># # ... with 102 more rows, and 7 more variables: profile.created_at &lt;chr&gt;,</span></span>
<span><span class="co"># #   profile.description &lt;chr&gt;, profile.verified &lt;lgl&gt;,</span></span>
<span><span class="co"># #   profile.public_metrics.followers_count &lt;int&gt;,</span></span>
<span><span class="co"># #   profile.public_metrics.following_count &lt;int&gt;,</span></span>
<span><span class="co"># #   profile.public_metrics.tweet_count &lt;int&gt;,</span></span>
<span><span class="co"># #   profile.public_metrics.listed_count &lt;int&gt;</span></span>
<span></span>
<span><span class="co"># actor edges dataframe structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">actor_net</span><span class="op">$</span><span class="va">edges</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># # A tibble: 124 x 6</span></span>
<span><span class="co">#   from       to     type  tweet_id    created_at     text                       </span></span>
<span><span class="co">#   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;          &lt;chr&gt;                      </span></span>
<span><span class="co"># 1 2759935913 24599~ reply 1372636834~ 2021-03-18T19~ "@Limp ~   @Warcraft @MSF_~</span></span>
<span><span class="co"># 2 133101119~ 61033~ reply 1372635200~ 2021-03-18T19~ "@Warcraft @MSF_USA Coming~</span></span>
<span><span class="co"># 3 2401609580 61033~ reply 1372634777~ 2021-03-18T19~ "@Warcraft @MSF_USA When d~</span></span>
<span><span class="co"># # ... with 121 more rows</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="network-graphs">Network Graphs<a class="anchor" aria-label="anchor" href="#network-graphs"></a>
</h3>
<p>Networks can be converted into different formats and plotted using graph packages such as <code>igraph</code> and <code>ggraph</code>. Below is an example for plotting a threads actor network.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com" class="external-link">ggraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://igraph.org" class="external-link">igraph</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># create igraph</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_data_frame.html" class="external-link">graph_from_data_frame</a></span><span class="op">(</span></span>
<span>  <span class="va">actor_net</span><span class="op">$</span><span class="va">edges</span>,</span>
<span>  vertices <span class="op">=</span> <span class="va">actor_net</span><span class="op">$</span><span class="va">nodes</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># dashed lines for quote edges</span></span>
<span><span class="va">line_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>reply <span class="op">=</span> <span class="st">"solid"</span>, quote <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot actor network</span></span>
<span><span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html" class="external-link">ggraph</a></span><span class="op">(</span><span class="va">g</span>, layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/layout_nicely.html" class="external-link">layout.auto</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_loop.html" class="external-link">geom_edge_loop</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_fan.html" class="external-link">geom_edge_fan</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"gray"</span>,</span>
<span>    arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html" class="external-link">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">'mm'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    start_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html" class="external-link">circle</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">'mm'</span><span class="op">)</span>,</span>
<span>    end_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html" class="external-link">circle</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">'mm'</span><span class="op">)</span>,</span>
<span>    strength <span class="op">=</span> <span class="fl">1.2</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_linetype_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">line_vals</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html" class="external-link">geom_node_point</a></span><span class="op">(</span></span>
<span>    size <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Plots of an activity network and corresponding actor reply network graph generated from a small Twitter conversation thread.</p>
<p><img src="https://vosonlab.github.io/voson.tcn/images/network_graphs_plot.png" alt="activity and actor network graphs" width="90%"></p>
</div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the VOSON Lab projects are released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html" class="external-link">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=voson.tcn" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/vosonlab/voson.tcn/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/vosonlab/voson.tcn/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>GPL (&gt;= 3)</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing voson.tcn</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bryan Gertzel <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://developer.twitter.com/en/docs/twitter-api" class="external-link"><img src="https://img.shields.io/endpoint?url=https://twbadges.glitch.me/badges/v2" alt="Twitter_API_v2"></a></li>
<li><a href="https://CRAN.R-project.org/package=voson.tcn" class="external-link"><img src="https://www.r-pkg.org/badges/version/voson.tcn" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://CRAN.R-project.org/package=voson.tcn" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/voson.tcn" alt="CRAN_Monthly"></a></li>
<li><a href="https://CRAN.R-project.org/package=voson.tcn" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/voson.tcn" alt="CRAN_Total"></a></li>
<li><a href="https://github.com/vosonlab/voson.tcn/releases" class="external-link"><img src="https://img.shields.io/github/release-pre/vosonlab/voson.tcn.svg?logo=github" alt="Github_Release"></a></li>
<li><a href="https://github.com/vosonlab/voson.tcn" class="external-link"><img src="https://img.shields.io/static/v1?label=dev&amp;message=v0.5.0&amp;logo=github" alt="Github_Dev"></a></li>
<li><a href="https://github.com/vosonlab/voson.tcn/commits/main" class="external-link"><img src="https://img.shields.io/github/last-commit/vosonlab/voson.tcn.svg?&amp;logo=github" alt="Last_Commit"></a></li>
<li><a href="https://github.com/vosonlab/voson.tcn/actions" class="external-link"><img src="https://github.com/vosonlab/voson.tcn/workflows/R-CMD-check/badge.svg" alt="Build_Status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Bryan Gertzel.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
